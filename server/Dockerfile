
FROM oven/bun:latest
WORKDIR /app/server

COPY package.json bun.lock ./
RUN bun install

COPY . .

ENV NODE_ENV=production

ARG SERVER_PORT
ARG PQL_ENDPOINT_QUERY
ARG PQL_API_KEY

ENV SERVER_PORT=${SERVER_PORT}
ENV PQL_ENDPOINT_QUERY=${PQL_ENDPOINT_QUERY}
ENV PQL_API_KEY=${PQL_API_KEY}



EXPOSE ${SERVER_PORT}

CMD ["bun", "src/index.ts"]
